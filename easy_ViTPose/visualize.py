import matplotlib.pyplot as plt
import numpy as np

# Example keypoints array: [(x1, y1, v1), (x2, y2, v2), ..., (x65, y65, v65)]
# For the sake of this example, let's create random keypoints with visibility
arr = [356.0690002441406, 556.370361328125, 0.045115433633327484, 356.0690002441406, 552.1074829101562, 0.08878728002309799, 356.0690002441406, 546.4237060546875, 0.09477238357067108, 354.63946533203125, 542.160888671875, 0.09389884769916534, 353.20989990234375, 542.160888671875, 0.040386468172073364, 354.63946533203125, 549.2655639648438, 0.021278904750943184, 353.20989990234375, 554.9494018554688, 0.022525954991579056, 351.78033447265625, 554.9494018554688, 0.02107245847582817, 351.78033447265625, 554.9494018554688, 0.02058844268321991, 351.78033447265625, 556.370361328125, 0.018735740333795547, 348.9212341308594, 554.9494018554688, 0.011306528933346272, 351.78033447265625, 556.370361328125, 0.027119020000100136, 344.632568359375, 552.1074829101562, 0.01600824110209942, 344.632568359375, 553.5284423828125, 0.013773727230727673, 350.3507995605469, 556.370361328125, 0.013666898012161255, 351.78033447265625, 556.370361328125, 0.022679686546325684, 351.78033447265625, 557.7913208007812, 0.015146532095968723, 351.78033447265625, 557.7913208007812, 0.016087345778942108, 346.0621337890625, 553.5284423828125, 0.010633937083184719, 350.3507995605469, 556.370361328125, 0.018416855484247208, 351.78033447265625, 557.7913208007812, 0.013842817395925522, 351.78033447265625, 557.7913208007812, 0.013497832231223583, 353.20989990234375, 559.2122802734375, 0.01151919737458229, 353.20989990234375, 557.7913208007812, 0.023887760937213898, 351.78033447265625, 557.7913208007812, 0.012555534951388836, 351.78033447265625, 557.7913208007812, 0.0118560791015625, 353.20989990234375, 559.2122802734375, 0.015640975907444954, 354.63946533203125, 539.3189086914062, 0.10347893089056015, 353.20989990234375, 536.47705078125, 0.0982416421175003, 348.9212341308594, 535.0560913085938, 0.08543474227190018, 350.3507995605469, 535.0560913085938, 0.06799890846014023, 354.63946533203125, 542.160888671875, 0.07278064638376236, 357.4985656738281, 542.160888671875, 0.03620372340083122, 358.9281311035156, 549.2655639648438, 0.0389067642390728, 347.4916687011719, 550.6865844726562, 0.01863442361354828, 346.0621337890625, 550.6865844726562, 0.0212776530534029, 346.0621337890625, 550.6865844726562, 0.021528400480747223, 346.0621337890625, 550.6865844726562, 0.025992274284362793, 346.0621337890625, 552.1074829101562, 0.014111067168414593, 344.632568359375, 552.1074829101562, 0.014189479872584343, 346.0621337890625, 550.6865844726562, 0.024048786610364914, 344.632568359375, 552.1074829101562, 0.016906628385186195, 346.0621337890625, 552.1074829101562, 0.01956857740879059, 344.632568359375, 552.1074829101562, 0.014722784049808979, 344.632568359375, 552.1074829101562, 0.017481284216046333, 346.0621337890625, 550.6865844726562, 0.017393721267580986, 344.632568359375, 552.1074829101562, 0.012538759037852287, 346.0621337890625, 552.1074829101562, 0.01690099947154522, 346.0621337890625, 552.1074829101562, 0.014128388836979866, 346.0621337890625, 552.1074829101562, 0.011577295139431953, 346.0621337890625, 552.1074829101562, 0.018598098307847977, 357.4985656738281, 559.2122802734375, 0.013651209883391857, 346.0621337890625, 553.5284423828125, 0.014747340232133865, 346.0621337890625, 552.1074829101562, 0.011147595942020416, 346.0621337890625, 553.5284423828125, 0.013643811456859112, 358.9281311035156, 559.2122802734375, 0.03311960771679878, 351.78033447265625, 572.0008544921875, 0.034948717802762985, 353.20989990234375, 584.7894287109375, 0.011286811903119087, 364.6463317871094, 586.2103271484375, 0.0176712479442358, 363.216796875, 587.6312866210938, 0.015888996422290802, 357.4985656738281, 559.2122802734375, 0.03464394807815552, 358.9281311035156, 573.4217529296875, 0.04121232405304909, 354.63946533203125, 586.2103271484375, 0.018394360318779945, 364.6463317871094, 587.6312866210938, 0.01733635738492012, 364.6463317871094, 587.6312866210938, 0.015325811691582203]
n = 3
keypoints = []
for i in range(0, (len(arr) - n + 1), n):
    keypoints.append(arr[i:i+n])
# Keypoint names (assuming the order is the same as in your keypoints array)

keypoint_names = ["crl_hips__C",
    "crl_spine__C",
    "crl_spine01__C",
    "crl_shoulder__L",
    "crl_arm__L",
    "crl_foreArm__L",
    "crl_hand__L",
    "crl_handThumb__L",
    "crl_handThumb01__L",
    "crl_handThumb02__L",
    "crl_handThumbEnd__L",
    "crl_handIndex__L",
    "crl_handIndex01__L",
    "crl_handIndex02__L",
    "crl_handIndexEnd__L",
    "crl_handMiddle__L",
    "crl_handMiddle01__L",
    "crl_handMiddle02__L",
    "crl_handMiddleEnd__L",
    "crl_handRing__L",
    "crl_handRing01__L",
    "crl_handRing02__L",
    "crl_handRingEnd__L",
    "crl_handPinky__L",
    "crl_handPinky01__L",
    "crl_handPinky02__L",
    "crl_handPinkyEnd__L",
    "crl_neck__C",
    "crl_Head__C",
    "crl_eye__L",
    "crl_eye__R",
    "crl_shoulder__R",
    "crl_arm__R",
    "crl_foreArm__R",
    "crl_hand__R",
    "crl_handThumb__R",
    "crl_handThumb01__R",
    "crl_handThumb02__R",
    "crl_handThumbEnd__R",
    "crl_handIndex__R",
    "crl_handIndex01__R",
    "crl_handIndex02__R",
    "crl_handIndexEnd__R",
    "crl_handMiddle__R",
    "crl_handMiddle01__R",
    "crl_handMiddle02__R",
    "crl_handMiddleEnd__R",
    "crl_handRing__R",
    "crl_handRing01__R",
    "crl_handRing02__R",
    "crl_handRingEnd__R",
    "crl_handPinky__R",
    "crl_handPinky01__R",
    "crl_handPinky02__R",
    "crl_handPinkyEnd__R",
    "crl_thigh__R",
    "crl_leg__R",
    "crl_foot__R",
    "crl_toe__R",
    "crl_toeEnd__R",
    "crl_thigh__L",
    "crl_leg__L",
    "crl_foot__L",
    "crl_toe__L",
    "crl_toeEnd__L"]

# Create a new figure
plt.figure(figsize=(10, 10))

# Plot keypoints
for i, (x, y, v) in enumerate(keypoints):
    if v == 1:  # visible keypoints
        plt.scatter(x, y, label=keypoint_names[i], color='blue')
    else:  # invisible keypoints
        plt.scatter(x, y, label=keypoint_names[i], color='red', alpha=0.3)

# Annotate visible keypoints with their names
for i, (x, y, v) in enumerate(keypoints):
    if v == 1:  # only annotate visible keypoints
        plt.annotate(keypoint_names[i], (x, y), textcoords="offset points", xytext=(0,10), ha='center')

# Set plot title and labels
plt.title('Visualization of Keypoints')
plt.xlabel('X')
plt.ylabel('Y')
plt.legend(loc='upper left', bbox_to_anchor=(1, 1))
plt.grid(True)
plt.axis('equal')

# Show plot
plt.show()
